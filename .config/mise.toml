[tools]
node = "22"
bun = "1"

[tasks.test]
run = [
    { task = "test:server" },
    { task = "test:typecheck" },
]

[tasks."test:server"]
run = "npx vitest --config .config/vitest.server.ts --run"

[tasks."test:typecheck"]
run = "npx tsc --noEmit"

[tasks.update]
run = [
    "mise upgrade",
    "npx npm-check-updates --target minor -u -x '@duckdb/duckdb-wasm' -x '@duckdb/node-api' --cooldown 7",
    "bun install",
    "npx dprint config update",
    "npx playwright install chromium --with-deps",
    "bun audit",
]

[tasks.build]
run = "npx tsc -p .config/tsconfig.build.json"
